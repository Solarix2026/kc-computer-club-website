/* eslint-disable prettier/prettier */
# ğŸ“ ç‚¹åç³»ç»Ÿè°ƒè¯•ä¸è®¾ç½®å®Œå…¨æŒ‡å—

## âœ… å·²å®Œæˆçš„ä¿®å¤

### 1. **æ•°æ®åº“é›†åˆåˆ›å»º**
- âœ… æ·»åŠ  `clubSettings` é›†åˆåˆ° `config/collections.json`
- âœ… åˆ›å»ºäº† 22 ä¸ªå­—æ®µç”¨äºå­˜å‚¨ç¤¾å›¢è®¾ç½®å’Œç‚¹åé…ç½®
- âœ… é€šè¿‡ `/api/init/create-club-settings` æˆåŠŸåˆå§‹åŒ–é›†åˆåˆ° Appwrite

### 2. **API ç«¯ç‚¹éªŒè¯**
- âœ… `/api/attendance` - è·å–ç‚¹åçŠ¶æ€ã€æ ‡è®°ç‚¹å
- âœ… `/api/attendance?action=debug-status` - è·å–ç‚¹åé…ç½®å’Œè°ƒè¯•çŠ¶æ€
- âœ… POST æ›´æ–°ç‚¹åé…ç½®: `action: 'update-config'`
- âœ… POST åˆ‡æ¢è°ƒè¯•æ¨¡å¼: `action: 'toggle-debug'`

### 3. **å‰ç«¯ç•Œé¢é›†æˆ**
- âœ… åå°ç®¡ç† â†’ è®¾ç½® â†’ ç‚¹åé…ç½®æ ‡ç­¾é¡µ
- âœ… åŠ¨æ€è¡¨å•å­—æ®µæ›´æ–°
- âœ… é…ç½®æŒä¹…åŒ–ä¿å­˜åˆ° Appwrite

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1: åˆå§‹åŒ–é›†åˆï¼ˆé¦–æ¬¡ï¼‰

å¦‚æœ `clubSettings` é›†åˆè¿˜æœªåˆ›å»ºï¼Œè®¿é—®åˆå§‹åŒ–ç«¯ç‚¹ï¼š

```bash
# å¼€å‘ç¯å¢ƒ
curl -X POST http://localhost:3000/api/init/create-club-settings

# æˆ–é€šè¿‡æµè§ˆå™¨
æ‰“å¼€: http://localhost:3000/api/init/create-club-settings
```

**é¢„æœŸç»“æœ**: `{"success":true,"message":"clubSettings é›†åˆåˆ›å»ºæˆåŠŸ"}`

### æ­¥éª¤ 2: å¯åŠ¨åº”ç”¨

```bash
npm run dev
```

### æ­¥éª¤ 3: è®¿é—®ç‚¹åè®¾ç½®

1. è½¬åˆ° `/admin/dashboard` (éœ€è¦ä»¥ç®¡ç†å‘˜èº«ä»½ç™»å½•)
2. ç‚¹å‡»å·¦ä¾§èœå• "è®¾ç½®"
3. åœ¨å³ä¾§é€‰æ‹© "ç‚¹åé…ç½®" æ ‡ç­¾é¡µ

---

## ğŸ“‹ ç‚¹åé…ç½®å­—æ®µè¯´æ˜

### æ—¶é—´é…ç½®

| å­—æ®µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **ç‚¹åæ—¥æœŸ** | ç‚¹åå‘ç”Ÿçš„æ—¥æœŸï¼ˆå‘¨æ—¥åˆ°å‘¨å…­ï¼‰ | å‘¨äºŒ |
| **ç¬¬ä¸€æ—¶æ®µå¼€å§‹** | ç¬¬ä¸€ä¸ªç‚¹åæ—¶æ®µçš„å¼€å§‹æ—¶é—´ | 15:20 |
| **ç¬¬ä¸€æ—¶æ®µæŒç»­** | ç¬¬ä¸€æ—¶æ®µæŒç»­å¤šå°‘åˆ†é’Ÿ | 5 |
| **ç¬¬äºŒæ—¶æ®µå¼€å§‹** | ç¬¬äºŒä¸ªç‚¹åæ—¶æ®µçš„å¼€å§‹æ—¶é—´ | 16:35 |
| **ç¬¬äºŒæ—¶æ®µæŒç»­** | ç¬¬äºŒæ—¶æ®µæŒç»­å¤šå°‘åˆ†é’Ÿ | 5 |

### å‘¨æ•°è®¡ç®—

| å­—æ®µ | è¯´æ˜ | æ ¼å¼ |
|------|------|------|
| **ç¬¬1å‘¨å¼€å§‹æ—¥æœŸ** | å­¦å¹´ç¬¬1å‘¨çš„ç¬¬ä¸€å¤© | YYYY-MM-DD (å¦‚ 2026-01-06) |

**ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—**ï¼š
- æ ¹æ®å½“å‰æ—¥æœŸå’Œç¬¬1å‘¨å¼€å§‹æ—¥æœŸè®¡ç®—å½“å‰å‘¨æ•°
- ç‚¹åè®°å½•ä¼šè‡ªåŠ¨å…³è”åˆ°ç›¸åº”çš„å‘¨æ•°

### è°ƒè¯•æ¨¡å¼

| å­—æ®µ | è¯´æ˜ |
|------|------|
| **è°ƒè¯•æ¨¡å¼** | å¯ç”¨åï¼Œå¿½ç•¥æ—¶é—´é™åˆ¶ï¼Œå­¦ç”Ÿéšæ—¶å¯ä»¥ç‚¹å |

**ç”¨é€”**ï¼š
- å¼€å‘å’Œæµ‹è¯•ç‚¹ååŠŸèƒ½
- æ¼”ç¤ºç³»ç»Ÿå·¥ä½œæµç¨‹
- æµ‹è¯•åå°ç»Ÿè®¡å’ŒæŠ¥è¡¨

---

## ğŸ”§ é…ç½®ç¤ºä¾‹

### æ–¹æ¡ˆ 1: æ¯å‘¨äºŒçš„ä¸¤ä¸ªæ—¶æ®µï¼ˆå¸¸è§ï¼‰

```
ç‚¹åæ—¥æœŸ: å‘¨äºŒ
ç¬¬ä¸€æ—¶æ®µ: 15:20 - 15:25 (5åˆ†é’Ÿ)
ç¬¬äºŒæ—¶æ®µ: 16:35 - 16:40 (5åˆ†é’Ÿ)
ç¬¬1å‘¨å¼€å§‹: 2026-01-06
è°ƒè¯•æ¨¡å¼: å…³é—­
```

### æ–¹æ¡ˆ 2: å‘¨æœ«è¯¾å ‚ï¼ˆå•æ—¶æ®µï¼‰

```
ç‚¹åæ—¥æœŸ: å‘¨å…­
ç¬¬ä¸€æ—¶æ®µ: 09:00 - 09:10 (10åˆ†é’Ÿ)
ç¬¬äºŒæ—¶æ®µ: ä¸ä½¿ç”¨ (è®¾ç½®ä¸ºä»»æ„å€¼)
ç¬¬1å‘¨å¼€å§‹: 2026-01-06
è°ƒè¯•æ¨¡å¼: å…³é—­
```

### æ–¹æ¡ˆ 3: å¼€å‘æµ‹è¯•ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰

```
ç‚¹åæ—¥æœŸ: å‘¨ä¸‰
ç¬¬ä¸€æ—¶æ®µ: 14:00 - 14:05 (5åˆ†é’Ÿ)
ç¬¬äºŒæ—¶æ®µ: 15:00 - 15:05 (5åˆ†é’Ÿ)
ç¬¬1å‘¨å¼€å§‹: 2026-01-06
è°ƒè¯•æ¨¡å¼: æ‰“å¼€ âœ“
```

---

## ğŸ“Š ç‚¹åæµç¨‹

### å­¦ç”Ÿç«¯æµç¨‹

```
1. è®¿é—® /attendance
2. æ£€æŸ¥ /api/attendance å½“å‰çŠ¶æ€
3. å¦‚æœåœ¨ç‚¹åæ—¶é—´ï¼š
   - è¾“å…¥å­¦å·ã€å§“åã€é‚®ç®±
   - ç‚¹å‡»"ç­¾åˆ°"
   - è®°å½•ä¿å­˜åˆ° attendance é›†åˆ
4. å¦‚æœä¸åœ¨ç‚¹åæ—¶é—´ï¼š
   - æ˜¾ç¤ºä¸‹ä¸€ä¸ªç‚¹åæ—¶é—´
   - æˆ–å¼€å¯è°ƒè¯•æ¨¡å¼ç»•è¿‡æ—¶é—´é™åˆ¶
```

### åå°ç®¡ç†æµç¨‹

```
1. ç®¡ç†å‘˜è®¿é—® /admin/dashboard/settings?tab=attendance
2. ä¿®æ”¹ç‚¹åé…ç½®ï¼š
   - é€‰æ‹©ç‚¹åæ—¥æœŸ
   - è®¾å®šä¸¤ä¸ªæ—¶æ®µæ—¶é—´
   - è®¾ç½®å‘¨æ•°è®¡ç®—çš„å‚è€ƒæ—¥æœŸ
   - å¯é€‰å¯ç”¨è°ƒè¯•æ¨¡å¼
3. ç‚¹å‡»"ä¿å­˜è®¾ç½®"
4. é…ç½®é€šè¿‡ POST /api/attendance (action: 'update-config') ä¿å­˜
5. å®æ—¶ç”Ÿæ•ˆ - æ— éœ€é‡å¯æœåŠ¡å™¨
```

### è°ƒè¯•æ¨¡å¼

```
1. åœ¨è®¾ç½®é¡µå¯ç”¨"è°ƒè¯•æ¨¡å¼"
2. å­¦ç”Ÿå¯ä»¥åœ¨ä»»ä½•æ—¶é—´ç‚¹å
3. è®°å½•ä¼šè¢«æ ‡è®°ä¸º [DEBUG] è°ƒè¯•æ¨¡å¼ç‚¹å
4. ç®¡ç†å‘˜å¯ä»¥åœ¨ /admin/dashboard/attendance ä¸­æŸ¥çœ‹å’Œè¿‡æ»¤
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: ä¿å­˜è®¾ç½®æ—¶æç¤º"ä¿å­˜å¤±è´¥"

**åŸå› **: é€šå¸¸æ˜¯ Appwrite æƒé™é—®é¢˜æˆ–é›†åˆä¸å­˜åœ¨

**è§£å†³**:
```bash
1. ç¡®è®¤é›†åˆå·²åˆ›å»º:
   curl http://localhost:3000/api/init/create-club-settings
   
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯:
   F12 -> Console æ ‡ç­¾
   
3. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—:
   çœ‹å¼€å‘æœåŠ¡å™¨è¾“å‡ºä¸­æ˜¯å¦æœ‰é”™è¯¯
```

### é—®é¢˜ 2: ç‚¹åæ—¶æ˜¾ç¤º"å½“å‰ä¸åœ¨ç‚¹åæ—¶é—´"

**åŸå› **: 
- å½“å‰æ—¶é—´ä¸åœ¨é…ç½®çš„æ—¶æ®µå†…
- å‘¨æ•°ä¸åŒ¹é…ï¼ˆé…ç½®çš„æ—¥æœŸä¸ç³»ç»Ÿå‘¨æ•°è®¡ç®—ä¸ç¬¦ï¼‰

**è§£å†³**:
```bash
1. æ£€æŸ¥é…ç½®:
   - ç¡®è®¤å½“å‰æ˜¯é…ç½®çš„æ—¥æœŸï¼ˆå¦‚å‘¨äºŒï¼‰
   - ç¡®è®¤å½“å‰æ—¶é—´åœ¨ç‚¹åæ—¶æ®µå†…
   
2. å¯ç”¨è°ƒè¯•æ¨¡å¼è¿›è¡Œæµ‹è¯•:
   - åœ¨è®¾ç½®é¡µæ‰“å¼€"è°ƒè¯•æ¨¡å¼"
   - åˆ·æ–°å­¦ç”Ÿç‚¹åé¡µé¢
   - åº”è¯¥èƒ½çœ‹åˆ°å¯ä»¥ç‚¹å
   
3. æ£€æŸ¥ç¬¬1å‘¨å¼€å§‹æ—¥æœŸ:
   - ç¡®ä¿æ—¥æœŸæ­£ç¡®ï¼ˆåº”è¯¥æ˜¯è¯¥å­¦å¹´ç¬¬ä¸€å‘¨çš„ç¬¬ä¸€å¤©ï¼‰
   - ç¡®ä¿æ ¼å¼ä¸º YYYY-MM-DD
```

### é—®é¢˜ 3: ç‚¹åæˆåŠŸä½†æ²¡æœ‰è®°å½•

**åŸå› **: 
- å­¦ç”Ÿçš„ email æ ¼å¼ä¸æ­£ç¡®
- åŒä¸€æ—¶æ®µå·²ç»ç‚¹è¿‡å

**è§£å†³**:
```bash
1. æ£€æŸ¥å­¦ç”Ÿé‚®ç®±æ ¼å¼ (å¿…é¡»æ˜¯æœ‰æ•ˆçš„email)
2. æŸ¥çœ‹ /admin/dashboard/attendance æ˜¯å¦æœ‰è®°å½•
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ JavaScript é”™è¯¯
```

### é—®é¢˜ 4: è°ƒè¯•æ¨¡å¼å¼€å…³æ— æ³•ä¿å­˜

**åŸå› **: API è¯·æ±‚å¤±è´¥

**è§£å†³**:
```bash
1. æ£€æŸ¥ API ç«¯ç‚¹: POST /api/attendance
2. æŸ¥çœ‹æµè§ˆå™¨ç½‘ç»œæ ‡ç­¾: F12 -> Network
3. æŸ¥çœ‹å“åº”çŠ¶æ€ç å’Œé”™è¯¯ä¿¡æ¯
4. é‡å¯å¼€å‘æœåŠ¡å™¨
```

---

## ğŸ“ ç›¸å…³æ–‡ä»¶

### æ ¸å¿ƒæœåŠ¡
- [`src/services/attendance.service.ts`](../src/services/attendance.service.ts) - ç‚¹åä¸šåŠ¡é€»è¾‘
- [`src/app/api/attendance/route.ts`](../src/app/api/attendance/route.ts) - API ç«¯ç‚¹

### UI ç»„ä»¶
- [`src/app/admin/settings/page.tsx`](../src/app/admin/settings/page.tsx) - è®¾ç½®é¡µé¢ï¼ˆåŒ…å«ç‚¹åé…ç½®ï¼‰
- [`src/app/attendance/page.tsx`](../src/app/attendance/page.tsx) - å­¦ç”Ÿç‚¹åé¡µé¢

### æ•°æ®åº“
- [`config/collections.json`](../config/collections.json) - é›†åˆå®šä¹‰ï¼ˆåŒ…æ‹¬ clubSettingsï¼‰
- `Appwrite` - clubSettings é›†åˆï¼ˆè¿è¡Œæ—¶åˆ›å»ºï¼‰

### åˆå§‹åŒ–è„šæœ¬
- [`scripts/create-club-settings-collection.ts`](../scripts/create-club-settings-collection.ts) - åˆ›å»ºé›†åˆè„šæœ¬
- [`src/app/api/init/create-club-settings/route.ts`](../src/app/api/init/create-club-settings/route.ts) - API åˆå§‹åŒ–ç«¯ç‚¹

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### å·²å®ç°
- âœ… ç‚¹åæ—¶é—´é…ç½®ï¼ˆä¸¤ä¸ªæ—¶æ®µï¼‰
- âœ… å‘¨æ•°è‡ªåŠ¨è®¡ç®—
- âœ… å®æ—¶å¯ç”¨/ç¦ç”¨
- âœ… è°ƒè¯•æ¨¡å¼
- âœ… å­¦ç”Ÿç­¾åˆ°åŠŸèƒ½
- âœ… é‡å¤ç­¾åˆ°æ£€æŸ¥
- âœ… åå°ç®¡ç†ç•Œé¢

### è®¡åˆ’ä¸­
- ğŸ“‹ æ‰¹é‡å¯¼å…¥å­¦ç”Ÿåå•
- ğŸ“Š å‡ºå¸­ç»Ÿè®¡æŠ¥è¡¨
- ğŸ“§ è‡ªåŠ¨æé†’é‚®ä»¶
- ğŸ“± ç§»åŠ¨ç«¯æ‰«ç ç­¾åˆ°
- ğŸ”” å®æ—¶ç­¾åˆ°é€šçŸ¥

---

## ğŸ”‘ å…³é”®æ•°æ®æµ

```
å‰ç«¯è®¾ç½®è¡¨å•
    â†“
POST /api/attendance (action: update-config)
    â†“
API è·¯ç”±éªŒè¯è¯·æ±‚
    â†“
saveAttendanceConfigToDB()
    â†“
Appwrite: clubSettings é›†åˆæ›´æ–°
    â†“
å­¦ç”Ÿè®¿é—®ç‚¹åé¡µé¢
    â†“
GET /api/attendance?action=debug-status
    â†“
è·å–æœ€æ–°é…ç½® + è°ƒè¯•çŠ¶æ€
    â†“
å‰ç«¯æ˜¾ç¤ºé…ç½®æˆ–å…è®¸ç‚¹å
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

æŸ¥çœ‹ä»¥ä¸‹æ–‡æ¡£ï¼š
1. [`docs/ADMIN_LOGIN_SETUP.md`](./ADMIN_LOGIN_SETUP.md) - ç®¡ç†å‘˜ç³»ç»Ÿè®¾ç½®
2. [`docs/context.md`](./context.md) - äº§å“éœ€æ±‚å’Œæ¶æ„
3. æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12) - å®æ—¶è°ƒè¯•

---

**æœ€åæ›´æ–°**: 2025-01-09  
**ç‰ˆæœ¬**: 1.0  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª
