/* eslint-disable prettier/prettier */
# ğŸ¯ ç‚¹åç³»ç»Ÿ - å¿«é€Ÿå‚è€ƒå¡

## ğŸš€ 3æ­¥å¯åŠ¨

```bash
# 1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 2. åˆå§‹åŒ–æ•°æ®åº“ï¼ˆé¦–æ¬¡ï¼‰
curl -X POST http://localhost:3000/api/init/create-club-settings

# 3. è®¿é—®åº”ç”¨
æ‰“å¼€ http://localhost:3000
```

---

## ğŸ“ å…³é”®é¡µé¢

| é¡µé¢ | URL | ç”¨é€” |
|------|-----|------|
| **å­¦ç”Ÿç‚¹å** | `/attendance` | å­¦ç”Ÿè¿›è¡Œç‚¹å/ç­¾åˆ° |
| **ç®¡ç†å‘˜è®¾ç½®** | `/admin/settings` | é…ç½®ç‚¹åæ—¶é—´å’Œå‚æ•° |
| **ç‚¹åè®°å½•æŸ¥çœ‹** | `/admin/attendance` | æŸ¥çœ‹å’Œç®¡ç†ç‚¹åè®°å½• |
| **åˆå§‹åŒ–** | `/api/init/create-club-settings` | åˆ›å»ºæ•°æ®åº“é›†åˆï¼ˆé¦–æ¬¡ï¼‰ |

---

## ğŸ”§ é…ç½®ç¤ºä¾‹

### æ¯å‘¨äºŒä¸Šè¯¾æ—¶é—´ç‚¹å

```
ç‚¹åæ—¥æœŸ:     å‘¨äºŒ
æ—¶æ®µ1:        15:20 - 15:25 (5åˆ†é’Ÿ)
æ—¶æ®µ2:        16:35 - 16:40 (5åˆ†é’Ÿ)
ç¬¬1å‘¨å¼€å§‹:    2026-01-06
è°ƒè¯•æ¨¡å¼:     å…³é—­
```

### æµ‹è¯•é…ç½®ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰

```
ç‚¹åæ—¥æœŸ:     å‘¨ä¸‰
æ—¶æ®µ1:        14:00 - 14:05
æ—¶æ®µ2:        15:00 - 15:05
ç¬¬1å‘¨å¼€å§‹:    2026-01-06
è°ƒè¯•æ¨¡å¼:     æ‰“å¼€ âœ“
```

---

## ğŸ”Œ API å¿«é€ŸæŸ¥è¯¢

### è·å–ç‚¹åçŠ¶æ€
```bash
GET /api/attendance?action=debug-status

# å“åº”
{
  "isAttendanceOpen": true,
  "session": {
    "sessionTime": "15:20-15:25",
    "minutesRemaining": 3
  },
  "weekNumber": 2,
  "debugMode": false
}
```

### ä¿å­˜é…ç½®
```bash
POST /api/attendance

{
  "action": "update-config",
  "config": {
    "dayOfWeek": 2,
    "session1Start": { "hour": 15, "minute": 20 },
    "session1Duration": 5,
    "session2Start": { "hour": 16, "minute": 35 },
    "session2Duration": 5,
    "weekStartDate": "2026-01-06"
  }
}
```

### å­¦ç”Ÿç‚¹å
```bash
POST /api/attendance

{
  "studentId": "S001",
  "studentName": "å¼ ä¸‰",
  "studentEmail": "zhangsan@school.edu"
}
```

---

## âš¡ å¿«é€Ÿè°ƒè¯•

### å¯ç”¨è°ƒè¯•æ¨¡å¼
```javascript
// ç®¡ç†å‘˜è®¾ç½® â†’ ç‚¹åé…ç½®
// æ‰“å¼€"è°ƒè¯•æ¨¡å¼"å¼€å…³
// å­¦ç”Ÿå¯éšæ—¶ç‚¹åï¼ˆå¿½ç•¥æ—¶é—´é™åˆ¶ï¼‰
```

### æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
```bash
# éªŒè¯ clubSettings é›†åˆ
curl -X GET http://localhost:3000/api/attendance?action=debug-status

# åº”è¯¥è¿”å›é…ç½®æ•°æ®
```

### æŸ¥çœ‹ç‚¹åè®°å½•
```bash
# åœ¨ Appwrite æ§åˆ¶å°
Databases â†’ kccompt_db â†’ attendance
# æŸ¥çœ‹æœ€æ–°è®°å½•
```

---

## âŒ å¸¸è§é—®é¢˜é€Ÿè§£

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|--------|
| é…ç½®ä¿å­˜å¤±è´¥ | 1. è¿è¡Œåˆå§‹åŒ–ç«¯ç‚¹<br>2. æ£€æŸ¥ F12 æ§åˆ¶å°é”™è¯¯<br>3. é‡å¯å¼€å‘æœåŠ¡å™¨ |
| ä¸åœ¨ç‚¹åæ—¶é—´ | 1. æ£€æŸ¥å½“å‰æ—¶é—´å’Œé…ç½®<br>2. å¯ç”¨è°ƒè¯•æ¨¡å¼<br>3. æ£€æŸ¥å‘¨æ•°æ˜¯å¦æ­£ç¡® |
| å­¦ç”Ÿç‚¹åå¤±è´¥ | 1. éªŒè¯é‚®ç®±æ ¼å¼<br>2. æ£€æŸ¥æ˜¯å¦å·²ç‚¹è¿‡å<br>3. æŸ¥çœ‹ F12 Network æ ‡ç­¾ |
| API 404 é”™è¯¯ | 1. ç¡®è®¤ URL æ‹¼å†™æ­£ç¡®<br>2. æ£€æŸ¥å¼€å‘æœåŠ¡å™¨æ˜¯å¦è¿è¡Œ<br>3. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¿å­˜ |

---

## ğŸ“± å·¥ä½œæµ

### ğŸ‘¨â€ğŸ’¼ ç®¡ç†å‘˜

```
1. /admin/settings
2. ç‚¹å‡»"ç‚¹åé…ç½®"
3. ä¿®æ”¹æ—¶é—´/æ—¥æœŸ
4. ç‚¹å‡»"ä¿å­˜"
5. âœ“ é…ç½®ç”Ÿæ•ˆ
```

### ğŸ‘¨â€ğŸ“ å­¦ç”Ÿ

```
1. /attendance
2. æ£€æŸ¥"æ˜¯å¦åœ¨ç‚¹å"
3. å¡«å†™è¡¨å•
4. ç‚¹å‡»"ç­¾åˆ°"
5. âœ“ è®°å½•ä¿å­˜
```

---

## ğŸ¨ UI ç•Œé¢åé¦ˆ

| åœºæ™¯ | æ˜¾ç¤º |
|------|------|
| åœ¨ç‚¹åæ—¶é—´ | âœ“ æ˜¾ç¤ºè¡¨å•ï¼Œå€’è®¡æ—¶ |
| ä¸åœ¨ç‚¹åæ—¶é—´ | â° æ˜¾ç¤ºä¸‹ä¸€ä¸ªæ—¶é—´ |
| è°ƒè¯•æ¨¡å¼å¼€å¯ | ğŸ› ç»•è¿‡æ—¶é—´é™åˆ¶ |
| ç‚¹åæˆåŠŸ | âœ… ç»¿è‰²æç¤º + å‘¨æ•° |
| é‡å¤ç‚¹å | âš ï¸ "å·²å®Œæˆç‚¹å" |
| æ—¶é—´è®¡ç®— | ğŸ”¢ è‡ªåŠ¨è®¡ç®—å½“å‰å‘¨æ•° |

---

## ğŸ”‘ å…³é”®æ•°æ®

### é›†åˆ: clubSettings
- å­˜å‚¨ç‚¹åé…ç½®
- å­˜å‚¨å…³äºæˆ‘ä»¬ä¿¡æ¯
- åŒ…å« 22 ä¸ªå­—æ®µ
- æƒé™: å…¬å¼€è¯»å†™

### é›†åˆ: attendance
- å­˜å‚¨ç‚¹åè®°å½•
- å­—æ®µ: studentId, checkInTime, sessionTime, weekNumber
- æ¯æ¡è®°å½•è‡ªåŠ¨å…³è”å‘¨æ•°
- æ”¯æŒå†å²æŸ¥è¯¢

---

## ğŸ“Š æ•°æ®åº“ç»“æ„

```
Appwrite Project
â”œâ”€â”€ Database: kccompt_db
â”‚   â”œâ”€â”€ Collection: clubSettings
â”‚   â”‚   â”œâ”€â”€ attendanceDayOfWeek
â”‚   â”‚   â”œâ”€â”€ attendanceSession1Start
â”‚   â”‚   â”œâ”€â”€ attendanceDebugMode
â”‚   â”‚   â””â”€â”€ ... (22 å­—æ®µ)
â”‚   â”‚
â”‚   â””â”€â”€ Collection: attendance
â”‚       â”œâ”€â”€ studentId
â”‚       â”œâ”€â”€ checkInTime
â”‚       â”œâ”€â”€ sessionTime
â”‚       â”œâ”€â”€ weekNumber
â”‚       â””â”€â”€ status
```

---

## âœ… éªŒè¯æ¸…å•

éƒ¨ç½²å‰éªŒè¯ï¼š

- [ ] `npm run build` æˆåŠŸï¼ˆ0 é”™è¯¯ï¼‰
- [ ] `/api/init/create-club-settings` è¿”å›æˆåŠŸ
- [ ] ç®¡ç†å‘˜å¯ä»¥ä¿å­˜é…ç½®
- [ ] å­¦ç”Ÿå¯ä»¥åœ¨è°ƒè¯•æ¨¡å¼ä¸‹ç‚¹å
- [ ] ç‚¹åè®°å½•åœ¨æ•°æ®åº“ä¸­

---

## ğŸ“– è¯¦ç»†æ–‡æ¡£

| æ–‡æ¡£ | å†…å®¹ |
|------|------|
| [ATTENDANCE_CONFIG_GUIDE.md](./ATTENDANCE_CONFIG_GUIDE.md) | å®Œæ•´é…ç½®æŒ‡å— |
| [ATTENDANCE_SYSTEM_COMPLETE.md](./ATTENDANCE_SYSTEM_COMPLETE.md) | æ•´åˆæŠ¥å‘Š |

---

## ğŸ“ å­¦ä¹ èµ„æº

- ğŸ”§ [API æ–‡æ¡£](../src/app/api/attendance/route.ts)
- ğŸ’¾ [æœåŠ¡é€»è¾‘](../src/services/attendance.service.ts)
- ğŸ¨ [å‰ç«¯ä»£ç ](../src/app/attendance/page.tsx)
- âš™ï¸ [é…ç½®å®šä¹‰](../config/collections.json)

---

**å¿«é€Ÿé“¾æ¥**: 
- ä¸»é¡µ: http://localhost:3000
- å­¦ç”Ÿç‚¹å: http://localhost:3000/attendance
- ç®¡ç†åå°: http://localhost:3000/admin/dashboard
- è®¾ç½®: http://localhost:3000/admin/settings

**ç”Ÿäº§ç¯å¢ƒ**: å·²éªŒè¯ âœ… å¯éƒ¨ç½²

